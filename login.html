<!DOCTYPE html>
<!-- saved from url=(0049)https://getbootstrap.com/docs/4.3/examples/album/ -->
<html lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">

    <!-- google -->

    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="588144434107-bhr2d4bdvkn2t1amsnafsccv1kfujtsf.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>

    <!-- google -->

    <title>eMercado - Todo lo que busques está aquí</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">

    <!-- CSS propio -->
    <link href="css/login.css" rel="stylesheet">
  </head>

  <body>
  <!-- google -->

      <script>
        //formúla que hace funcionar el login de google
        function onSignIn(googleUser) {
          //muestra el "botón" que permite cerrar sesión
          var p_cerr = document.getElementById("p_cerrador");
          p_cerr.innerHTML = ""
          var bot_cerr = document.getElementById("cerrador");
          bot_cerr.innerHTML = "Cerrar sesión google";

          //esconde el div que contien los campos a completar
          var hide_data = document.getElementById("data_div");
          hide_data.style.display = "none";

          //muestra el botón para ingresar a eComercio luego de iniciar con google
          var boton_free_mos = document.getElementById("boton_free");
          boton_free_mos.style.display = "block";

          // Useful data for your client-side scripts:
          var profile = googleUser.getBasicProfile();
          console.log("ID: " + profile.getId()); // Don't send this directly to your server!
          console.log('Full Name: ' + profile.getName());
          console.log('Given Name: ' + profile.getGivenName());
          console.log('Family Name: ' + profile.getFamilyName());
          console.log("Image URL: " + profile.getImageUrl());
          console.log("Email: " + profile.getEmail());

          // The ID token you need to pass to your backend:
          var id_token = googleUser.getAuthResponse().id_token;
          console.log("ID Token: " + id_token);
        }
      </script>

      <script>
        //función que cierra la cuenta de google
        function signOut() {
          var auth2 = gapi.auth2.getAuthInstance();
          auth2.signOut().then(function () {
            //esconde el botón de entrar con google
            let boton_free_mos2 = document.getElementById("boton_free");
            boton_free_mos2.style.display = "none";

            //esconde el botón de cerrar sesión
            let bit_cerrad = document.getElementById("cerrador");
            bit_cerrad.innerHTML = "";

            //muestra de vuelta los campos para completar
            let mostrar_data = document.getElementById("data_div");
            mostrar_data.style.display = "block";

            console.log('User signed out.');
          });
        }
      </script>


  <!-- google -->

  <div class="centrado">

    <div>
      <img src="img/login.png" alt="login-img" style="width: 60%;">
    </div>

    <div>
      <p style="margin-left: 10px; margin-right: 10px;">Bienvenido! Ingrese su usuario y contraseña, en caso de no estar registrado puede crear su cuenta automáticamente completando los campos requeridos.</p>
      <p>También puede usar su cuenta de google para ingresar</p>
    </div>

    <hr>

    <div id="data_div">
      <input type="email" id="email" placeholder="Email" onblur="rojo('email', 'email_error')"><br>
        <span id="email_error" style="color: red;"></span>
        <br>

      <input type="password" id="password" placeholder="Contraseña" onblur="rojo('password', 'password_error')"><br>
        <span id="password_error" style="color: red;"></span>
        <br>

      <input type="checkbox" value="Recordarme" id="recordarme_check">
        <label for="recordarme_check">Recordarme</label>
        <br>

      <button onclick="ingresar()">Entrar</button>

    </div>

    <div id="boton_free">
      <p style="font-weight: bold;">Ha iniciado sesión con Google, ya puede acceder al sitio</p>
      <button onclick="redirigir()">Entrar a eComercio</button>
    </div>

    <hr>
    
    <div>
      <p id="p_cerrador">Ingrese con Google</p>
        <div class="center">
          <a href="#" id="cerrador" onclick="signOut();"></a>
          <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
        </div>
      <hr>
    </div>

  </div>

    <script src="js/init.js"></script>
    <script src="js/login.js"></script>

  </body>
</html>